# -01 提供するサービスの検討
## output
    サービスの内容
      EC，SNS，ニュース、、、
      ターゲット、コンテキスト、デバイス

    アプリケーションに必要な機能・デザイン
      システムにデータを保つ必要があるか
      DB、データ検索機能、API実装
      UI

    システム基盤に求められる機能
      DBサーバ、24/365、冗長化、停止しないことなど

# -02 利用言語、ソフトウェアの検討
## output
    どんな言語が適しているか、アプリケーションの特徴に合った言語を選定
    ★すべての言語の特徴知ってないと無理では？

    OS,ミドルウェアも検討する。
    ※Webサーバ、APサーバ、DBMSなど

    TomcatってAPサーバだったのか!

# -03 ネットワーク構成の検討
## output
    ネットワーク構成図書くの好きという先輩がいたなぁ…

    外部ネットワーク、内部ネットワーク、DMZ（DeMilitarized Zone）
    DMZの窓口がファイアウォール。
    DMZの中にIDS，IPS，WAF，Webサーバなどを置く。
    APサーバは内部ネットワークに置く
    FWは外部ネットワークに置く
    冗長化構成をとる（ファイアウォール、IDS/IPS、WAF、Webサーバ）
    など
# -04 サーバー構成の検討
## output
    ネットワークの構成が決まり、各ネットワークに配置するサーバ構成を検討するフェーズ

    ・どのサーバ機器で動作させるか
    ・サーバ機器の配置先のネットワークをどこにするか
    ・サーバ冗長化を行うかどうか

    ★ロードバランサー
    リクエストをどのWebサーバにわたすか、という振り分けを行うための機器。
    Webサーバーよりインターネット寄りに配置し、配下となるWebサーバを認識させる。Webサーバの負荷を平準化させるようにリクエストを分散。
    FWの次とかに設置。
    ※最近はオンプレのサーバなんてないんだろうから、基本これから作るものについては、AWSとかGCPとかを検討すべきだな。

    ★配置先のネットワーク
    サーバ機器はDMZまたは内部に配置する。セキュリティを高めるため。当たり前！

    ★サーバの構成
    ・コスト重視で最低限のサーバ機器の設置にしたい
    ・可用性を重視して機器故障によるサービス停止を０に近づける
    などの方針を決めて構成を決めるべし。
    WebサーバとAPサーバを1つのサーバ機器で動作させる、など

# -05 サーバー基盤の検討
## output
    自分で機器を購入か、借りるか
    ・オンプレミス、レンタル、クラウド

# -06 負荷分散
## output
    ロードバランサーが行う。Apacheなどのソフトウェアでもロードバランサーの機能を持つものがある。

    ・ラウンドロビン方式
    各サーバに順番にリクエストを割り振る

    ・動的分散方式
    サーバの負荷を監視し、負荷が少ないサーバにリクエストを振り分ける
    CPU使用率、メモリ使用率、ディスク負荷、コネクション数をみる

    ・パーシステンス
    サーバを振り分けてしまうと、ログイン情報などのセッションを管理するのが難しくなる。ので、同一クライアントからのリクエストを判別して同じサーバに転送するような機能。頭いい！
    
    ※でもパーシステンスだと、同じクライアントから大量のアクセスがきた、とかいう場合は全部同じサーバに行っちゃうので負荷分散にならによな、、

# -07 サーバー設計・構築
## output
    個々のサーバの耐障害性やセキュリティを考慮した設計が必要
    ・ディスク構成
        重要データはサーバのシステムデータと別のディスクに保管。パーティション切るなど

    ・セキュリティ
        初期設定の機能、ユーザを見直す
        悪用される恐れのある不要なものは停止・削除する

    ・システム基盤テスト
        サーバの設定が正しくされているかテストする。
        設定ファイルや削除したユーザがログインできない、ミドルウェアの動作確認、再起動に必要なプログラムが正しく起動するか

# -08 データベース設計
## output
    論理設計：
    ・データベースに格納すべきデータの洗い出し、データの関連（リレーション）と多重度（1:多の対応　※1顧客に複数注文、1注文に複数商品など）を検討する。
    
    ・詳細な情報の洗い出し
    エンティティに属する詳細な情報（属性）など
    
    ・データの整理
    データの重複をなくし、エンティティの単位を分割。エンティティは最小単位になるようにする

    物理設計：
    論理設計で定義されたデータを実際のデータベース内にどのように格納するかを決める。
    ・データは文字列か数値か
    ・何文字か
    ・整数か少数か
    など。データベース自体の設定（文字列の文字コード、DBディスク領域）もここで検討

# -09 アプリケーション設計
## output
    基本設計（外部設計）：
      アプリケーションの動作を設計
      機能の一覧
      アプリケーション構成図
      画面レイアウト

    詳細設計（内部設計）：
      モジュール作成のための設計
      モジュールの処理内容
      モジュール間の連携方法
      画面の遷移フロー
      ※この設計を元にアプリケーションのプログラミングが行われる
      ※モジュール：ログインとかログアウトとかまとまった1つの機能

    テスト：
      モジュールごとのテスト > 単体テスト
      モジュール同士の連携テスト > 連結テスト

# -10 バックアップ運用
## output
    バックアップ対象
    ファイル、DBの中身
    DBはDBMSでバックアップ
    バックアップの頻度・世代管理
    過去のバックアップを何世代残すか、など頻繁に更新されるようなデータが無くならないように設計する。

    フルバックアップ＋差分、スナップショットとかいろいろと。
    リストアもちゃんとできるか、確認が必要。
    また、デプロイするときなどはデプロイの工程の中にバックアップを入れる。なども検討必要

# -11 ログ運用
## output
    OSが発生したイベントやエラー：システムログ
    ミドルウェアのアプリケーションの動作履歴：アプリケーションログ
    Webサーバが受けたリクエストを記録：アクセスログ
    ★古いものを削除、別ファイルに切り分けたりする

    ログローテーション（ハウスキープ）
    ・ログファイルを切り分け、別ファイルとして保存
    ・ログの量が多い場合はファイルサイズで分ける場合があったり、日次、週次、月次で切り分けたりする

    アクセスログ
    Webサーバから発行される。アクセスしてきた日時やページが記録される。ApacheLogViewer，Vistorsといったアクセスログ解析用のソフトも開発されている

# -12 Webサイトのパフォーマンス
## output
    リクエストが送られてからユーザの画面表示までの時間をパフォーマンス、という。
    
    パフォーマンスの指標
    ・応答時間（リクエスト送信から何らかHTTP返答まで）
    ・表示完了時間（リクエスト送信からWebペジ表示が完了）
    ・ページ読み込み時間（ページの読み込み開始から完了）
    ・可用性（エラー無くWebサイトにアクセスできた確率）
    ※1年間（8760h）で10hサイト停止
    >>> (8760-10)/8760)x100 = 99.886%

    パフォーマンス監視
    ・定期的にパフォーマンスを監視。低下を感知した場合は原因調査、適切な処置を行い、目標のパフォーマンスを維持する。
    サーバの負荷状態を同時に監視しておくことも有効。可用性も算出可能。いろいろなツールがある。
    ※サーバへのパフォーマンス監視もリクエスト、となるのであまりに頻度が多いと負荷になる…

# -13 脆弱性診断
## output
    ・脆弱性情報DBを定期的に確認し、利用している製品の脆弱性の有無を把握しておく。
    ・自前で開発したWebアプリケーションは自分で調査・対応する必要がある。
    
    脆弱性の有無確認
    ・擬似的なサイバー攻撃をしてみる（ペネトレーションテスト）
    ・セキュリティ企業に依頼してテストを行ってもらう

    発見された脆弱性への対策
    ・修正プログラムを適用、脆弱性のないバージョンにアップグレード。など。OS，ミドルウェアのバージョンアップは要注意。
    ※事前にテスト環境で確認する